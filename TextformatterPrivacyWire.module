<?php namespace ProcessWire;

/**
 * Textformatter PrivacyWire
 * This module adds the textformatter for PrivacyWire
 *
 *
 * @author blaueQuelle
 *
 * ProcessWire 3.x
 * Copyright (C) 2011 by Ryan Cramer
 * Licensed under GNU/GPL v2, see LICENSE.TXT
 *
 * http://www.processwire.com
 * http://www.ryancramer.com
 *
 */
class TextformatterPrivacyWire extends Textformatter implements Module
{

    public static function getModuleInfo()
    {
        return [
            'title' => 'PrivacyWire Textformatter',
            'summary' => "PrivacyWire Textformatter to render privacy options via shortcode [[privacywire]]",
            'author' => 'blaueQuelle',
            'href' => "https://github.com/blaueQuelle/privacywire",
            'version' => 2,
            'requires' => [
                "PHP>=7.2",
                "ProcessWire>=3",
                "PrivacyWire>=2"
            ],
        ];
    }

    public function formatValue(Page $page, Field $field, &$str)
    {
        $privacyWire = $this->modules->get("PrivacyWire");

        $output = "<button class='privacywire-show-options'>{$privacyWire->textformatter_choose_label}</button>";

        $str = str_replace("[[privacywire]]", $output, $str);
    }
}
