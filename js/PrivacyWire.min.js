"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==_typeof(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=1)}([function(e,t,n){var o,r,i;i=function(){function e(){for(var e,t=0,n={};t<arguments.length;t++)for(var o in e=arguments[t])n[o]=e[o];return n}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(o){function r(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=o.write?o.write(n,t):encodeURIComponent(n+"").replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(t+"").replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(o.read||o)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(c){}if(r[u]=c,e===u)break}catch(c){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(t,n){i(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}(function(){})},void 0===(r="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=r),e.exports=i()},function(e,t,n){n(2),e.exports=n(3)},function(e,t,n){function o(e,t){for(var n,o=0;o<t.length;o++)(n=t[o]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}n.r(t);var r=n(0),i=n.n(r);window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),new(function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.cookie=this.sanitizeCookie(),this.settings=this.sanitizeSettings(t),this.consent={},this.consent.necessary=!0,this.consent.statistics=!1,this.consent.marketing=!1,this.consent.external_media=!1,this.updateConsentFromCookie(),this.initBanner(),this.updateElements(),this.handleExternalTriggers(),!this.hasValidConsent()&&this.hasNoDNT()&&this.showBanner()}return function(e,t,n){t&&o(e.prototype,t)}(e,[{key:"sanitizeCookie",value:function(){var e,t,n,o,r;if(!i.a.get("privacywire"))return null;var s=JSON.parse(decodeURIComponent(i.a.get("privacywire"))),a={};return a.version=null!==(e=parseInt(s.version))&&void 0!==e?e:null,a.consent={},a.consent.necessary=null!==(t=!!s.consent.necessary)&&void 0!==t?t:null,a.consent.statistics=null!==(n=!!s.consent.statistics)&&void 0!==n?n:null,a.consent.marketing=null!==(o=!!s.consent.marketing)&&void 0!==o?o:null,a.consent.external_media=null!==(r=!!s.consent.external_media)&&void 0!==r?r:null,a}},{key:"sanitizeSettings",value:function(e){return{dnt:!!parseInt(e.dnt),version:parseInt(e.version),options:!!parseInt(e.options)}}},{key:"hasValidConsent",value:function(){return null!=this.cookie&&this.cookie.version===this.settings.version}},{key:"hasNoDNT",value:function(){return!0!==this.settings.dnt||"1"!==navigator.doNotTrack||(this.consent.necessary=!0,this.consent.statistics=!1,this.consent.marketing=!1,this.consent.external_media=!1,this.savePreferences(!0),!1)}},{key:"initBanner",value:function(){this.banner={},this.banner.wrapper=document.querySelector(".privacywire-wrapper"),this.banner.button_accept_all=this.banner.wrapper.querySelector("button.allow-all"),this.banner.button_accept_necessary=this.banner.wrapper.querySelector("button.allow-necessary"),this.banner.button_choose=this.banner.wrapper.querySelector("button.choose"),this.banner.button_save=this.banner.wrapper.querySelector("button.save"),this.banner.button_toggle=this.banner.wrapper.querySelector("button.toggle"),this.banner.options=this.banner.wrapper.querySelectorAll(".privacywire-options input.optional"),this.banner.options_statistics=this.banner.wrapper.querySelector(".privacywire-options input#statistics"),this.banner.options_external_media=this.banner.wrapper.querySelector(".privacywire-options input#external_media"),this.banner.options_marketing=this.banner.wrapper.querySelector(".privacywire-options input#marketing"),this.banner.toggleToStatus=!0,this.prefillOptionValues(),this.handleButtons()}},{key:"showBanner",value:function(){this.banner.wrapper.classList.add("show-banner")}},{key:"showOptions",value:function(){this.banner.wrapper.classList.remove("show-banner"),this.banner.wrapper.classList.add("show-options")}},{key:"hideBanner",value:function(){this.banner.wrapper.classList.remove("show-banner"),this.banner.wrapper.classList.remove("show-options")}},{key:"showMessage",value:function(){var e=this;this.banner.wrapper.classList.add("show-message"),setTimeout(function(){e.banner.wrapper.classList.remove("show-message")},1500)}},{key:"prefillOptionValues",value:function(){this.banner.options_statistics.checked=this.consent.statistics,this.banner.options_external_media.checked=this.consent.external_media,this.banner.options_marketing.checked=this.consent.marketing}},{key:"handleButtons",value:function(){var e=this;this.banner.button_accept_all.onclick=function(){e.consent.necessary=!0,e.consent.statistics=!0,e.consent.external_media=!0,e.consent.marketing=!0,e.savePreferences()},this.banner.button_accept_necessary.onclick=function(){e.consent.necessary=!0,e.consent.statistics=!1,e.consent.external_media=!1,e.consent.marketing=!1,e.savePreferences()},this.banner.button_choose.onclick=function(){e.showOptions()},this.banner.button_toggle.onclick=function(){e.banner.options.forEach(function(t){t.checked=e.banner.toggleToStatus}),e.banner.toggleToStatus=!e.banner.toggleToStatus},this.banner.button_save.onclick=function(){e.consent.statistics=e.banner.options_statistics.checked,e.consent.external_media=e.banner.options_external_media.checked,e.consent.marketing=e.banner.options_marketing.checked,e.savePreferences()}}},{key:"savePreferences",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],t={};t.version=this.settings.version,t.consent=this.consent,i.a.set("privacywire",t,{expires:365}),this.hideBanner(),e||this.showMessage(),this.updateElements()}},{key:"updateConsentFromCookie",value:function(){null===this.cookie||(this.consent.statistics=this.cookie.consent.statistics,this.consent.external_media=this.cookie.consent.external_media,this.consent.marketing=this.cookie.consent.marketing)}},{key:"updateElements",value:function(){var e=this,t=document.querySelectorAll("[type=optin]");0===t.length||t.forEach(function(t){var n=t.dataset,o=n.category,r=!1;if(o)for(var i in e.consent)if(i===o&&!0===e.consent[i]){r=!0;break}if(r){var s=t.parentElement;if("SCRIPT"===t.tagName){for(var a,c=document.createElement("script"),u=0,l=Object.keys(n);u<l.length;u++)a=l[u],c.dataset[a]=t.dataset[a];c.type=n.type,c.innerText=t.innerText,c.text=t.text,c.class=t.class,c.style.cssText=t.style.cssText,c.id=t.id,c.name=t.name,c.defer=t.defer,c.async=t.async,n.src&&(c.src=n.src),s.insertBefore(c,t),s.removeChild(t)}}})}},{key:"handleExternalTriggers",value:function(){var e=this,t=document.querySelector(".privacywire-show-options");t&&(t.onclick=function(){e.showOptions()})}}]),e}())(PrivacyWireSettings)},function(){}]);
